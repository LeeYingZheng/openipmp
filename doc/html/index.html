<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&quot;DRM Plugin Architecture&quot;: DRM plugin SDK</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DRM plugin SDK </h1>
<p>
<h3 align="center">1.0 </h3>Here we present DRM plugin SDK for protecting media content and playing protected media content.<p>
Basis of the DRM plugin SDK are the plugins independent of the media format. These plugins perform all the DRM related stuff. To support different media formats (currently supported are mpeg4 and mpeg2 formats), there are additional plugins which handle specific format.<p>
For mpeg4 format, DRM plugin SDK implements standard defined protection, via mpeg4 DRM atoms which carry all necessary DRM informations. Basic DRM atom is an mpeg4 atom with "sinf" 4CC code, standing for (protection) scheme information atom. One can look at the mpeg4 documentation for further details on the protection architecture.<p>
For mpeg2 format, DRM plugin SDK implements standard defined protection, via IPMPX system. It is based on DRM informations being carried in IPMP control info structures, and messaging system which recognizes and connects DRM tools capable of handling specific protection scheme. One can look at the mpeg2 documentation for further details on the protection architecture.<p>
To integrate applications with DRM plugin SDK, one must implement certain interfaces required by the SDK. For mpeg4 support, one must implement all the interfaces given in <a class="el" href="_i_m_p_e_g4_d_r_m_atom_8h.html">IMPEG4DRMAtom.h</a>. For mpeg2 support, one must implement all the interfaces given in <a class="el" href="_i_i_p_m_p_control_info_part_8h.html">IIPMPControlInfoPart.h</a>, <a class="el" href="_i_i_p_m_p_descriptor_8h.html">IIPMPDescriptor.h</a>, <a class="el" href="_i_i_p_m_p_stream_data_update_8h.html">IIPMPStreamDataUpdate.h</a>, <a class="el" href="_i_sig_cert_container_8h.html">ISigCertContainer.h</a> and <a class="el" href="_i_m_p_e_g2_i_p_m_p_x_encoder_8h.html">IMPEG2IPMPXEncoder.h</a>. It is expected that the implementations of these interfaces rely on an already existing architecture, so implementations should need only inherit-and-provide-members approach.<p>
One important part of the SDK usage is passing certain parameters to SDK routines. DRMLogger is used to log SDK activity and possible errors. It saves the log in DRMPlugin.log file in the runtime directory. One can look at the log file to see the messages. IXMLElement is used to pass specific information needed by the SDK. For the most part, these informations need not be kept secret, so they can reside in a configuration file (see <a href="EncoderInfo.xml">EncoderInfo</a> and <a href="PlayerInfo.xml">PlayerInfo</a>). Some informations though, need to be kept secret and thus keeping them in a configuration file could reveal them to an unauthorized user. These informations should be passed to the encoding/decoding applications via command line (or somehow else), and then added up in the IXMLElement via its interface function IXMLElement::AddChildElement. Typically, these are user name and password to access DRM server. These informations are needed by SDK plugins, as one can see in the documentation for a specific plugin.<p>
<h3><b>Sample code</b></h3>
<p>
Usage of the DRM plugin SDK consists of two parts: encoding (protecting) media content and decoding (playing) protected media content. We provide basic usage explanations of the DRM plugin SDK in these two cases.<p>
For sample DRM encoder code (mpeg4 format), see <a class="el" href="group__mpeg4drmencoder.html">mpeg4 DRM encoder documentation.</a><p>
For sample DRM player code (mpeg4 format), see <a class="el" href="group__mpeg4drmplayer.html">mpeg4 DRM player documentation.</a><p>
For sample DRM encoder code (mpeg2 format), see <a class="el" href="group__mpeg2drmencoder.html">mpeg2 DRM encoder documentation.</a><p>
For sample DRM player code (mpeg2 format), see <a class="el" href="group__mpeg2drmplayer.html">mpeg2 DRM player documentation.</a><p>
<h3><b>Building and installing DRM plugin SDK</b></h3>
<p>
On all platforms, one must first go to openipmp2/ext directory and unpack axis-c/axis-c.rar, Crypto++/Crypto++.rar, openssl/openssl.rar, srtp/srtp.rar and xerces/xerces.rar, to the same directories where these archives reside, including full paths contained in the archives.<p>
On windows platform, one can then build DRM plugin SDK either with Microsoft Visual Studio 6 or Microsoft Visual Studio .NET. In directory src/DRMPlugin/DRMPluginAll, there are DRMPluginAll.dsw (Visual Studio 6 workspace) and DRMPluginAll.sln (Visual Studio .NET solution). Use the DRMPluginAll project to build all the code for the SDK. After the build is completed, all libraries and headers are copied to src/DRMPlugin/DRMPluginAll/DRMPlugin directory. Headers are copied to include directory. DRMPluginAll.dsw copies all binaries to lib/win32/VC6/debug directory for Debug configuration and to lib/win32/VC6/release directory for Release configuration. DRMPluginAll.sln copies all binaries to lib/win32/VC7/debug directory for Debug configuration and to lib/win32/VC7/release directory for Release configuration. After that one can use the code to build and link his own applications.<p>
On linux platform, one needs aclocal, autoconf, automake and libtool tools to build DRM plugin SDK. Run src/DRMPlugin/autogen.sh script to create the makefiles. Then from src/DRMPlugin directory, run make sdk_install (needs root privileges). Installing copies the headers to /usr/local/include/DRMPlugin directory and the binaries to /usr/local/lib/DRMPlugin directory. After that one can use the code to build and link his own applications. To uninstall DRM plugin SDK, from src/DRMPlugin directory run make sdk_uninstall (needs root privileges).<p>
<h3><b>Necessary stuff for DRM protection</b></h3>
<p>
DRM plugin SDK communicates with DRM server to get protection information, keys, handle users etc. Thus for DRM plugin SDK to work properly, one needs to install DRM server, or use one already installed. See DRM server documentation for details on building and installing it.<br>
<p>
DRM plugin SDK authenticates users using p12 files, protected with user name and password.<br>
 To register a new user, go to the page "http://&lt;IP&gt;:&lt;Port&gt;/openipmp/jsp/login.jsp" and follow the link <em>REGISTER New User</em>, assuming that IP and Port are the IP address and port where DRM server is installed and running.<br>
 Registered user can get a p12 file via the same page. Login with the user name and password, follow the <em>Keystore</em> link and save the p12 file to a desired directory.<br>
<p>
For OMA DRM support, additional files are needed. Because of OMA DRM requirements, one needs certificate files for authentication and identification. Thus to use OMA DRM, one must have his own X509 certificate file and a CA X509 certificate file, both DER encoded. Also, one must have his own DER encoded PKCS8 private key file. All these files can be created using for example openssl.<br>
 <hr size="1"><address style="align: right;"><small>Generated on Sat Jun 10 19:17:58 2006 for "DRM Plugin Architecture" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
