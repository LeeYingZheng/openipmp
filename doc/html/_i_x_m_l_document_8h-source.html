<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&quot;DRM Plugin Architecture&quot;: IXMLDocument.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>IXMLDocument.h</h1><a href="_i_x_m_l_document_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00012 <span class="preprocessor">#if !defined (IXMLDOCUMENT_H)</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define IXMLDOCUMENT_H</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#include &lt;string&gt;</span>
00016 <span class="preprocessor">#include &lt;vector&gt;</span>
00017 <span class="preprocessor">#include "<a class="code" href="_basic_types_8h.html">BasicTypes.h</a>"</span>
00018 
00020 <span class="keyword">namespace </span>DRMPlugin {
00021 
<a name="l00024"></a><a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">00024</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a> {
00025 };
00026 
<a name="l00029"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">00029</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a> {
00030 <span class="keyword">public</span>:
00031   <span class="keyword">virtual</span> ~<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a>() {
00032   }
00033 
00040   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a1">SetStrValue</a>(<span class="keyword">const</span> std::string&amp; val) = 0;
00041 
<a name="l00048"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a2">00048</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a2">SetBoolValue</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; val) {
00049     <span class="keywordflow">return</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a1">SetStrValue</a>((val == <span class="keyword">true</span>)? (<span class="stringliteral">"true"</span>): (<span class="stringliteral">"false"</span>));
00050   }
00051 
<a name="l00058"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a3">00058</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a3">SetIntValue</a>(<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; val) {
00059     <span class="keywordflow">return</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a1">SetStrValue</a>(<a class="code" href="namespace_d_r_m_plugin.html#a6">IntToString</a>(val));
00060   }
00061 
00062   <span class="comment">/*  \brief  Set attribute value from byte sequence.</span>
00063 <span class="comment"></span>
00064 <span class="comment">      \param  val       input, attribute value.</span>
00065 <span class="comment"></span>
00066 <span class="comment">      \returns  Boolean indicating success or failure.</span>
00067 <span class="comment">  */</span>
00068 <span class="comment">//  bool SetBytesValue(const ByteSeq&amp; val);</span>
00069 
00074   <span class="keyword">virtual</span> std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a4">GetName</a>() = 0;
00075 
00080   <span class="keyword">virtual</span> std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>() = 0;
00081 
<a name="l00089"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a6">00089</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a6">GetBoolValue</a>() {
00090     <span class="keywordflow">if</span> ((<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>() != <span class="stringliteral">"true"</span>) &amp;&amp; (<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>() != <span class="stringliteral">"false"</span>)) {
00091       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00092     }
00093     <span class="keywordflow">return</span> ((<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>() == <span class="stringliteral">"true"</span>)? (<span class="keyword">true</span>): (<span class="keyword">false</span>));
00094   }
00095 
<a name="l00103"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a7">00103</a>   <span class="keywordtype">int</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a7">GetIntValue</a>() {
00104     <span class="keywordflow">return</span> <a class="code" href="namespace_d_r_m_plugin.html#a7">StringToInt</a>(<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>());
00105   }
00106 
00107   <span class="comment">/*  \brief  Get attribute value as byte sequence.</span>
00108 <span class="comment"></span>
00109 <span class="comment">      If string representation of the attribute value cannot be decoded as</span>
00110 <span class="comment">      byte sequence, it will fail.</span>
00111 <span class="comment"></span>
00112 <span class="comment">      \returns  Attribute value. If fails, throws XMLException.</span>
00113 <span class="comment">  */</span>
00114 <span class="comment">//  ByteSeq GetBytesValue();</span>
00115 
<a name="l00120"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a8">00120</a>   std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a8">Encode</a>() {
00121     <span class="keywordflow">return</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a4">GetName</a>() + <span class="stringliteral">"=\""</span> + <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>() + <span class="stringliteral">"\""</span>;
00122   }
00123 };
00124 
<a name="l00127"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">00127</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a> {
00128 <span class="keyword">public</span>:
00129   <span class="keyword">virtual</span> ~<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>() {
00130   }
00131 
00138   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a1">SetStrValue</a>(<span class="keyword">const</span> std::string&amp; val) = 0;
00139 
<a name="l00146"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a2">00146</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a2">SetBoolValue</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; val) {
00147     <span class="keywordflow">return</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a1">SetStrValue</a>((val == <span class="keyword">true</span>)? (<span class="stringliteral">"true"</span>): (<span class="stringliteral">"false"</span>));
00148   }
00149 
<a name="l00156"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a3">00156</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a3">SetIntValue</a>(<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; val) {
00157     <span class="keywordflow">return</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a1">SetStrValue</a>(<a class="code" href="namespace_d_r_m_plugin.html#a6">IntToString</a>(val));
00158   }
00159 
00160   <span class="comment">/*  \brief  Set element value from byte sequence.</span>
00161 <span class="comment"></span>
00162 <span class="comment">      \param  val       input, element value.</span>
00163 <span class="comment"></span>
00164 <span class="comment">      \returns  Boolean indicating success or failure.</span>
00165 <span class="comment">  */</span>
00166 <span class="comment">//  bool SetBytesValue(const ByteSeq&amp; val);</span>
00167 
00175   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a4">AddAttribute</a>(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span>
00176     std::string&amp; val) = 0;
00177 
00186   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a5">AddChildElement</a>(<span class="keyword">const</span> std::string&amp; path) = 0;
00187 
<a name="l00197"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a6">00197</a>   <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a5">AddChildElement</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keyword">const</span> std::string&amp; val) {
00198     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* elem = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a5">AddChildElement</a>(path);
00199     elem-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a1">SetStrValue</a>(val);
00200     <span class="keywordflow">return</span> elem;
00201   }
00202 
00207   <span class="keyword">virtual</span> std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a7">GetName</a>() = 0;
00208 
00213   <span class="keyword">virtual</span> std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a8">GetStrValue</a>() = 0;
00214 
<a name="l00222"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a9">00222</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a9">GetBoolValue</a>() {
00223     <span class="keywordflow">if</span> ((<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a8">GetStrValue</a>() != <span class="stringliteral">"true"</span>) &amp;&amp; (<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a8">GetStrValue</a>() != <span class="stringliteral">"false"</span>)) {
00224       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00225     }
00226     <span class="keywordflow">return</span> ((<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a8">GetStrValue</a>() == <span class="stringliteral">"true"</span>)? (<span class="keyword">true</span>): (<span class="keyword">false</span>));
00227   }
00228 
<a name="l00236"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a10">00236</a>   <span class="keywordtype">int</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a10">GetIntValue</a>() {
00237     <span class="keywordflow">return</span> <a class="code" href="namespace_d_r_m_plugin.html#a7">StringToInt</a>(<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a8">GetStrValue</a>());
00238   }
00239 
00240   <span class="comment">/*  \brief  Get element value as byte sequence.</span>
00241 <span class="comment"></span>
00242 <span class="comment">      If string representation of the element value cannot be decoded as</span>
00243 <span class="comment">      byte sequence, it will fail.</span>
00244 <span class="comment"></span>
00245 <span class="comment">      \returns  Element value. If fails, throws XMLException.</span>
00246 <span class="comment">  */</span>
00247 <span class="comment">//  ByteSeq GetBytesValue();</span>
00248 
00255   <span class="keyword">virtual</span> std::vector&lt;IXMLAttribute*&gt; <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a11">GetAttributes</a>(<span class="keyword">const</span> std::string&amp; name) = 0;
00256 
00261   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a12">GetFirstChild</a>() = 0;
00262 
00267   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a13">GetFirstSibling</a>() = 0;
00268 
00273   <span class="keyword">virtual</span> std::vector&lt;IXMLElement*&gt; <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a14">GetAllChildElements</a>() = 0;
00274 
<a name="l00280"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a15">00280</a>   std::vector&lt;IXMLElement*&gt; <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a15">GetOneOrMoreChildElements</a>() {
00281     std::vector&lt;IXMLElement*&gt; elements = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a14">GetAllChildElements</a>();
00282     <span class="keywordflow">if</span> (elements.size() == 0) {
00283       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00284     }
00285     <span class="keywordflow">return</span> elements;
00286   }
00287 
<a name="l00294"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a16">00294</a>   std::vector&lt;IXMLElement*&gt; <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a16">GetChildElementsByName</a>(<span class="keyword">const</span> std::string&amp; name) {
00295     std::vector&lt;IXMLElement*&gt; elements = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a14">GetAllChildElements</a>();
00296     std::vector&lt;IXMLElement*&gt; ret;
00297     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; elements.size(); i++) {
00298       <span class="keywordflow">if</span> (elements[i]-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a7">GetName</a>() == name) {
00299         ret.push_back(elements[i]);
00300       }
00301     }
00302     <span class="keywordflow">return</span> ret;
00303   }
00304 
<a name="l00312"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a17">00312</a>   std::vector&lt;IXMLElement*&gt; <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a17">GetOneOrMoreChildElementsByName</a>(<span class="keyword">const</span> std::string&amp; name) {
00313     std::vector&lt;IXMLElement*&gt; elems = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a16">GetChildElementsByName</a>(name);
00314     <span class="keywordflow">if</span> (elems.size() == 0) {
00315       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00316     }
00317     <span class="keywordflow">return</span> elems;
00318   }
00319 
<a name="l00327"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a18">00327</a>   <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a18">GetAtMostOneChildElementByName</a>(<span class="keyword">const</span> std::string&amp; name) {
00328     std::vector&lt;IXMLElement*&gt; elems = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a16">GetChildElementsByName</a>(name);
00329     <span class="keywordflow">if</span> (elems.size() &gt; 1) {
00330       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00331     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elems.size() == 0) {
00332       <span class="keywordflow">return</span> 0;
00333     } <span class="keywordflow">else</span> {
00334       <span class="keywordflow">return</span> elems[0];
00335     }
00336   }
00337 
00347   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a19">GetChildElement</a>(<span class="keyword">const</span> std::string&amp; path) = 0;
00348 
<a name="l00361"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a20">00361</a>   std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a20">GetChildStrValue</a>(<span class="keyword">const</span> std::string&amp; path) {
00362     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* elem = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a19">GetChildElement</a>(path);
00363     <span class="keywordflow">if</span> (elem == 0) {
00364       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00365     }
00366     <span class="keywordflow">return</span> elem-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a8">GetStrValue</a>();
00367   }
00368 
<a name="l00381"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a21">00381</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a21">GetChildBoolValue</a>(<span class="keyword">const</span> std::string&amp; path) {
00382     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* elem = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a19">GetChildElement</a>(path);
00383     <span class="keywordflow">if</span> (elem == 0) {
00384       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00385     }
00386     <span class="keywordflow">return</span> elem-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a9">GetBoolValue</a>();
00387   }
00388 
<a name="l00401"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a22">00401</a>   <span class="keywordtype">int</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a22">GetChildIntValue</a>(<span class="keyword">const</span> std::string&amp; path) {
00402     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* elem = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a19">GetChildElement</a>(path);
00403     <span class="keywordflow">if</span> (elem == 0) {
00404       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00405     }
00406     <span class="keywordflow">return</span> elem-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a10">GetIntValue</a>();
00407   }
00408 
00409   <span class="comment">/*  \brief  Get value of the child element with given path as byte sequence.</span>
00410 <span class="comment"></span>
00411 <span class="comment">      Path elements' names must be divided by a dot (".").</span>
00412 <span class="comment">      If path is an empty string (""), returns this element's value.</span>
00413 <span class="comment"></span>
00414 <span class="comment">      \sa GetBytesValue().</span>
00415 <span class="comment"></span>
00416 <span class="comment">      \param  path      input, element path.</span>
00417 <span class="comment"></span>
00418 <span class="comment">      \returns  Value of the child element with given path. If fails, throws</span>
00419 <span class="comment">                XMLException.</span>
00420 <span class="comment">  */</span>
00421 <span class="comment">//  ByteSeq GetChildBytesValue(const std::string&amp; path);</span>
00422 
<a name="l00435"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a23">00435</a>   <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a23">GetChildAttribute</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keyword">const</span> std::string&amp; name) {
00436     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* elem = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a19">GetChildElement</a>(path);
00437     <span class="keywordflow">if</span> (elem == 0) {
00438       <span class="keywordflow">return</span> 0;
00439     }
00440     std::vector&lt;IXMLAttribute*&gt; atts = elem-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a11">GetAttributes</a>(name);
00441     <span class="keywordflow">if</span> ((atts.size() == 0) || (atts.size() &gt; 1)) {
00442       <span class="keywordflow">return</span> 0;
00443     }
00444     <span class="keywordflow">return</span> atts[0];
00445   }
00446 
<a name="l00462"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a24">00462</a>   std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a24">GetChildAttrStrValue</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keyword">const</span> std::string&amp; name) {
00463     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a>* att = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a23">GetChildAttribute</a>(path, name);
00464     <span class="keywordflow">if</span> (att == 0) {
00465       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00466     }
00467     <span class="keywordflow">return</span> att-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a5">GetStrValue</a>();
00468   }
00469 
<a name="l00485"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a25">00485</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a25">GetChildAttrBoolValue</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keyword">const</span> std::string&amp; name) {
00486     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a>* att = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a23">GetChildAttribute</a>(path, name);
00487     <span class="keywordflow">if</span> (att == 0) {
00488       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00489     }
00490     <span class="keywordflow">return</span> att-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a6">GetBoolValue</a>();
00491   }
00492 
<a name="l00508"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a26">00508</a>   <span class="keywordtype">int</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a26">GetChildAttrIntValue</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keyword">const</span> std::string&amp; name) {
00509     <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html">IXMLAttribute</a>* att = <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a23">GetChildAttribute</a>(path, name);
00510     <span class="keywordflow">if</span> (att == 0) {
00511       <span class="keywordflow">throw</span> <a class="code" href="class_d_r_m_plugin_1_1_x_m_l_exception.html">XMLException</a>();
00512     }
00513     <span class="keywordflow">return</span> att-&gt;<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_attribute.html#a7">GetIntValue</a>();
00514   }
00515 
00516   <span class="comment">/*  \brief  Get value of the attribute with given name of the child element</span>
00517 <span class="comment">              with given path as byte sequence.</span>
00518 <span class="comment"></span>
00519 <span class="comment">      Path elements' names must be divided by a dot (".").</span>
00520 <span class="comment">      If path is an empty string (""), returns value of this element's</span>
00521 <span class="comment">      attribute with given name.</span>
00522 <span class="comment"></span>
00523 <span class="comment">      \sa IXMLAttribute::GetBytesValue().</span>
00524 <span class="comment"></span>
00525 <span class="comment">      \param  path      input, element path.</span>
00526 <span class="comment">      \param  name      input, attribute name.</span>
00527 <span class="comment"></span>
00528 <span class="comment">      \returns  Value of the attribute with given name of the child element</span>
00529 <span class="comment">                with given path. If fails, throws XMLException.</span>
00530 <span class="comment">  */</span>
00531 <span class="comment">//  ByteSeq GetChildAttrBytesValue(const std::string&amp; path, const std::string&amp; name);</span>
00532 
00537   <span class="keyword">virtual</span> std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html#a27">Encode</a>() = 0;
00538 };
00539 
<a name="l00542"></a><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_document.html">00542</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_document.html">IXMLDocument</a> {
00543 <span class="keyword">public</span>:
00544   <span class="keyword">virtual</span> ~<a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_document.html">IXMLDocument</a>() {
00545   }
00546 
00551   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_element.html">IXMLElement</a>* <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_document.html#a1">GetRootElement</a>() = 0;
00552 
00557   <span class="keyword">virtual</span> std::string <a class="code" href="class_d_r_m_plugin_1_1_i_x_m_l_document.html#a2">Encode</a>() = 0;
00558 };
00559 
00560 } <span class="comment">// namespace DRMPlugin</span>
00561 
00562 <span class="preprocessor">#endif // !defined (IXMLDOCUMENT_H)</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jun 10 19:17:59 2006 for "DRM Plugin Architecture" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
