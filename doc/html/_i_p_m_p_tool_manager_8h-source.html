<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&quot;DRM Plugin Architecture&quot;: IPMPToolManager.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>IPMPToolManager.h</h1><a href="_i_p_m_p_tool_manager_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00012 <span class="preprocessor">#if !defined (IPMPTOOLMANAGER_H)</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define IPMPTOOLMANAGER_H</span>
00014 <span class="preprocessor"></span>
00015 <span class="comment">/* disabled warning</span>
00016 <span class="comment">          'identifier' : identifier was truncated to 'number' characters in</span>
00017 <span class="comment">          the debug information</span>
00018 <span class="comment">*/</span>
00019 <span class="preprocessor">#pragma warning(disable: 4786)</span>
00020 <span class="preprocessor"></span>
00021 <span class="preprocessor">#include "<a class="code" href="_basic_types_8h.html">BasicTypes.h</a>"</span>
00022 <span class="preprocessor">#include "<a class="code" href="_i_i_p_m_p_control_info_part_8h.html">IIPMPControlInfoPart.h</a>"</span>
00023 <span class="preprocessor">#include "IPMPData.h"</span>
00024 <span class="preprocessor">#include "<a class="code" href="_i_p_m_p_message_8h.html">IPMPMessage.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="_i_p_m_p_agent_8h.html">IPMPAgent.h</a>"</span>
00026 <span class="preprocessor">#include "<a class="code" href="_message_router_8h.html">MessageRouter.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="_d_r_m_logger_8h.html">DRMLogger.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="_i_i_p_m_p_terminal_8h.html">IIPMPTerminal.h</a>"</span>
00029 
00030 <span class="preprocessor">#include "<a class="code" href="_i_thread_sync_8h.html">IThreadSync.h</a>"</span>
00031 
00033 <span class="keyword">namespace </span>DRMPlugin {
00034 
00036 <span class="keyword">namespace </span>MPEG2IPMPXDRMPlugin {
00037 
<a name="l00042"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">00042</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a> {
00043 <span class="keyword">public</span>:
<a name="l00048"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a0">00048</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a0">IPMPToolContext</a>(): toolID(), instanceID(), control() {
00049   }
00050 
<a name="l00060"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a1">00060</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a0">IPMPToolContext</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a>&amp; tool, <span class="keyword">const</span> Bit32T&amp; instance, <span class="keyword">const</span> ByteT&amp; point,
00061     <span class="keyword">const</span> ByteT&amp; seq): toolID(tool), instanceID(instance), control(point),
00062     sequence(seq) {
00063   }
00064 
<a name="l00069"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a2">00069</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a0">IPMPToolContext</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a>&amp; rhs): toolID(rhs.toolID),
00070     instanceID(rhs.instanceID), control(rhs.control), sequence(rhs.sequence) {
00071   }
00072 
00073   <span class="keyword">virtual</span> ~<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a>() {
00074   }
00075 
00080   <span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a4">GetToolIdentifier</a>() <span class="keyword">const</span>;
00081 
00086   <span class="keyword">const</span> Bit32T&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a5">GetInstanceIdentifier</a>() <span class="keyword">const</span>;
00087 
00092   <span class="keyword">const</span> ByteT&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a6">GetControlPoint</a>() <span class="keyword">const</span>;
00093 
00098   <span class="keyword">const</span> ByteT&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#a7">GetSequenceCode</a>() <span class="keyword">const</span>;
00099 
00100 <span class="keyword">protected</span>:
00101   <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a> toolID;
00102   Bit32T instanceID;
00103   ByteT control;
00104   ByteT sequence;
00105 };
00106 
<a name="l00112"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html">00112</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html">ReadyIPMPToolContext</a>: <span class="keyword">public</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a> {
00113 <span class="keyword">public</span>:
<a name="l00118"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a0">00118</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a0">ReadyIPMPToolContext</a>(): <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a>(), oper(0) {
00119   }
00120 
<a name="l00131"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a1">00131</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a0">ReadyIPMPToolContext</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a>&amp; tool, <span class="keyword">const</span> Bit32T&amp; instance,
00132     <span class="keyword">const</span> ByteT&amp; point, <span class="keyword">const</span> ByteT&amp; seq, SymmetricOperator* op):
00133     <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a>(tool, instance, point, seq), oper(op) {
00134   }
00135 
<a name="l00140"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a2">00140</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a0">ReadyIPMPToolContext</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html">ReadyIPMPToolContext</a>&amp; rhs):
00141       <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html">IPMPToolContext</a>(rhs.toolID, rhs.instanceID, rhs.control, rhs.sequence),
00142       oper(0) {
00143     <span class="keywordflow">if</span> (rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#r0">oper</a> != 0) oper = rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#r0">oper</a>-&gt;Copy();
00144   }
00145 
00146   <span class="keyword">virtual</span> ~<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html">ReadyIPMPToolContext</a>() {
00147     <span class="keywordflow">if</span> (oper != 0) <span class="keyword">delete</span> oper; oper = 0;
00148   }
00149 
00154   SymmetricOperator* <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a4">GetOperator</a>() <span class="keyword">const</span>;
00155 
<a name="l00160"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a5">00160</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html">ReadyIPMPToolContext</a>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#a5">operator = </a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html">ReadyIPMPToolContext</a>&amp; rhs) {
00161     toolID = rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#p0">toolID</a>;
00162     instanceID = rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#p1">instanceID</a>;
00163     control = rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#p2">control</a>;
00164     sequence = rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_context.html#p3">sequence</a>;
00165     <span class="keywordflow">if</span> (oper != 0) <span class="keyword">delete</span> oper;
00166     oper = rhs.<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_ready_i_p_m_p_tool_context.html#r0">oper</a>-&gt;Copy();
00167     <span class="keywordflow">return</span> (*<span class="keyword">this</span>);
00168   }
00169 
00170 <span class="keyword">private</span>:
00171   SymmetricOperator* oper;
00172 };
00173 
<a name="l00178"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html">00178</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html">DataWaitContext</a> {
00179 <span class="keyword">public</span>:
<a name="l00184"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a0">00184</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a0">DataWaitContext</a>(): event(0), data(), receiver(0) {
00185   }
00186 
<a name="l00193"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a1">00193</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a0">DataWaitContext</a>(<a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* ev, <span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; dat, <span class="keyword">const</span> Bit32T&amp; rec):
00194     event(ev), data(dat), receiver(rec) {
00195   }
00196 
00197   ~<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html">DataWaitContext</a>() {
00198     <span class="keywordflow">if</span> (event != 0) <span class="keyword">delete</span> event;
00199   }
00200 
<a name="l00205"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a3">00205</a>   <a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a3">GetEvent</a>()<span class="keyword"> const </span>{
00206     <span class="keywordflow">return</span> event;
00207   }
00208 
<a name="l00213"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a4">00213</a>   <span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a4">GetData</a>()<span class="keyword"> const </span>{
00214     <span class="keywordflow">return</span> data;
00215   }
00216 
<a name="l00221"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a5">00221</a>   <span class="keywordtype">void</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a5">SetData</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; d) {
00222     data = d;
00223   }
00224 
<a name="l00229"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a6">00229</a>   <span class="keyword">const</span> Bit32T&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_data_wait_context.html#a6">GetReceiver</a>()<span class="keyword"> const </span>{
00230     <span class="keywordflow">return</span> receiver;
00231   }
00232 
00233 <span class="keyword">private</span>:
00234   <a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* event;
00235   <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a> data;
00236   Bit32T receiver;
00237 };
00238 
<a name="l00243"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html">00243</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html">AuthWaitContext</a> {
00244 <span class="keyword">public</span>:
<a name="l00249"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a0">00249</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a0">AuthWaitContext</a>(): event(0), success(false), receiver(0), authenticator(0) {
00250   }
00251 
<a name="l00259"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a1">00259</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a0">AuthWaitContext</a>(<a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* ev, <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; succ, <span class="keyword">const</span> Bit32T&amp; rec,
00260     Authenticator* auth): event(ev), success(succ), receiver(rec),
00261     authenticator(auth) {
00262   }
00263 
00264   ~<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html">AuthWaitContext</a>() {
00265     <span class="keywordflow">if</span> (event != 0) <span class="keyword">delete</span> event;
00266     <span class="keywordflow">if</span> (authenticator != 0) <span class="keyword">delete</span> authenticator; authenticator = 0;
00267   }
00268 
<a name="l00273"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a3">00273</a>   <a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a3">GetEvent</a>()<span class="keyword"> const </span>{
00274     <span class="keywordflow">return</span> event;
00275   }
00276 
<a name="l00281"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a4">00281</a>   <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a4">GetSuccess</a>()<span class="keyword"> const </span>{
00282     <span class="keywordflow">return</span> success;
00283   }
00284 
<a name="l00289"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a5">00289</a>   <span class="keywordtype">void</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a5">SetSuccess</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; succ) {
00290     success = succ;
00291   }
00292 
<a name="l00297"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a6">00297</a>   <span class="keyword">const</span> Bit32T&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a6">GetReceiver</a>()<span class="keyword"> const </span>{
00298     <span class="keywordflow">return</span> receiver;
00299   }
00300 
<a name="l00305"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a7">00305</a>   Authenticator* <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a7">GetAuthenticator</a>() {
00306     <span class="keywordflow">return</span> authenticator;
00307   }
00308 
<a name="l00313"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a8">00313</a>   <span class="keywordtype">void</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_auth_wait_context.html#a8">SetAuthenticator</a>(Authenticator* auth) {
00314     <span class="keywordflow">if</span> (authenticator != 0) <span class="keyword">delete</span> authenticator;
00315     authenticator = auth;
00316   }
00317 
00318 <span class="keyword">private</span>:
00319   <a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* event;
00320   <span class="keywordtype">bool</span> success;
00321   Bit32T receiver;
00322   Authenticator* authenticator;
00323 };
00324 
<a name="l00330"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html">00330</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html">UpdateWaitContext</a> {
00331 <span class="keyword">public</span>:
<a name="l00336"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a0">00336</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a0">UpdateWaitContext</a>(): event(0), success(false), receiver(0) {
00337   }
00338 
<a name="l00345"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a1">00345</a>   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a0">UpdateWaitContext</a>(<a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* ev, <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; succ, <span class="keyword">const</span> Bit32T&amp; rec):
00346     event(ev), success(succ), receiver(rec) {
00347   }
00348 
00349   ~<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html">UpdateWaitContext</a>() {
00350     <span class="keywordflow">if</span> (event != 0) <span class="keyword">delete</span> event;
00351   }
00352 
<a name="l00357"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a3">00357</a>   <a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a3">GetEvent</a>()<span class="keyword"> const </span>{
00358     <span class="keywordflow">return</span> event;
00359   }
00360 
<a name="l00365"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a4">00365</a>   <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a4">GetSuccess</a>()<span class="keyword"> const </span>{
00366     <span class="keywordflow">return</span> success;
00367   }
00368 
<a name="l00373"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a5">00373</a>   <span class="keywordtype">void</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a5">SetSuccess</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; succ) {
00374     success = succ;
00375   }
00376 
<a name="l00381"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a6">00381</a>   <span class="keyword">const</span> Bit32T&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_update_wait_context.html#a6">GetReceiver</a>()<span class="keyword"> const </span>{
00382     <span class="keywordflow">return</span> receiver;
00383   }
00384 
00385 <span class="keyword">private</span>:
00386   <a class="code" href="class_d_r_m_plugin_1_1_i_event.html">IEvent</a>* event;
00387   <span class="keywordtype">bool</span> success;
00388   Bit32T receiver;
00389 };
00390 
<a name="l00393"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager_exception.html">00393</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager_exception.html">IPMPToolManagerException</a> {
00394 };
00395 
<a name="l00400"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html">00400</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html">IPMPToolManager</a>: <span class="keyword">public</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_agent.html">IPMPAgent</a> {
00401 <span class="keyword">public</span>:
00410   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a0">IPMPToolManager</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_terminal.html">IIPMPTerminal</a>* term, <a class="code" href="class_d_r_m_plugin_1_1_d_r_m_logger.html">DRMLogger</a>&amp; logger);
00411 
00416   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a1">~IPMPToolManager</a>();
00417 
00428   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a2">ProcessMessage</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_message_from_tool.html">IPMPMessageFromTool</a>* in, <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_message_from_tool.html">IPMPMessageFromTool</a>** out);
00429 
00437   <span class="keyword">virtual</span> <span class="keyword">const</span> Bit32T&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a3">IPMPIdentifier</a>() <span class="keyword">const</span>;
00438 
00451   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a4">HandleOpaqueIPMPData</a>(<span class="keyword">const</span> Bit32T&amp; sender, OpaqueIPMPData* data,
00452     <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; resp);
00453 
00466   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a5">HandleSecureContainerIPMPData</a>(<span class="keyword">const</span> Bit32T&amp; sender,
00467     SecureContainerIPMPData* data, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; resp);
00468 
00481   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a6">HandleInitAuthenticationIPMPData</a>(<span class="keyword">const</span> Bit32T&amp; sender,
00482     InitAuthenticationIPMPData* data, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; resp);
00483 
00496   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a7">HandleMutualAuthenticationIPMPData</a>(<span class="keyword">const</span> Bit32T&amp; sender,
00497     MutualAuthenticationIPMPData* data, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; resp);
00498 
00511   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a8">HandleCanProcessIPMPData</a>(<span class="keyword">const</span> Bit32T&amp; sender, CanProcessIPMPData* data,
00512     <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; resp);
00513 
00526   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a9">HandleUserQueryIPMPData</a>(<span class="keyword">const</span> Bit32T&amp; sender, DecoderUserQueryIPMPData*
00527     data, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; resp);
00528 
00535   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a10">ProcessLastTStreamIPMPControlInfoPart</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_last_t_stream_i_p_m_p_control_info_part.html">ILastTStreamIPMPControlInfoPart</a>* in);
00536 
00543   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a11">ProcessInterTStreamIPMPControlInfoPart</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_inter_t_stream_i_p_m_p_control_info_part.html">IInterTStreamIPMPControlInfoPart</a>* in);
00544 
00551   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a12">ProcessLastPStreamIPMPControlInfoPart</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_last_p_stream_i_p_m_p_control_info_part.html">ILastPStreamIPMPControlInfoPart</a>* in);
00552 
00559   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a13">ProcessInterPStreamIPMPControlInfoPart</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_inter_p_stream_i_p_m_p_control_info_part.html">IInterPStreamIPMPControlInfoPart</a>* in);
00560 
00569   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a14">ProcessIPMPDescriptor</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html">IIPMPDescriptor</a>* in);
00570 
00579   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a15">ProcessIPMPStreamDataUpdate</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_stream_data_update.html">IIPMPStreamDataUpdate</a>* in);
00580 
00589   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a16">ProcessData</a>(<span class="keyword">const</span> ByteT&amp; cPoint, <span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; in, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; out);
00590 
00591 <span class="keyword">protected</span>:
00604   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_p_m_p_tool_manager.html#a2">ProcessMessage</a>(<span class="keyword">const</span> Bit32T&amp; sender, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; in, <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; out);
00605 
00606 <span class="keyword">private</span>:
00613   <span class="keywordtype">bool</span> IsCreated(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a>&amp; <span class="keywordtype">id</span>);
00614 
00621   <span class="keywordtype">bool</span> IsInstantiated(<span class="keyword">const</span> Bit32T&amp; <span class="keywordtype">id</span>);
00622 
00629   <span class="keywordtype">bool</span> IsAuthenticated(<span class="keyword">const</span> Bit32T&amp; <span class="keywordtype">id</span>);
00630 
00638   <span class="keywordtype">bool</span> IsReady(<span class="keyword">const</span> Bit32T&amp; <span class="keywordtype">id</span>);
00639 
00641   Bit32T identifier;
00643   <a class="code" href="class_d_r_m_plugin_1_1_i_mutex.html">IMutex</a>* mutex;
00647   std::map&lt;Bit128T, IPMPTool*&gt; created;
00651   std::map&lt;Bit32T, IPMPToolContext&gt; instantiated;
00655   std::map&lt;Bit32T, ReadyIPMPToolContext&gt; authenticated;
00661   std::map&lt;ByteT, std::vector&lt;ReadyIPMPToolContext&gt; &gt; ready;
00663   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_message_router.html">MessageRouter</a>* router;
00665   CryptoProvider* crypto;
00667   PrivateAuthContext* context;
00673   Bit32T lastDataID;
00675   <span class="keywordtype">bool</span> stop;
00683   std::map&lt;Bit32T, DataWaitContext*&gt; dataWait;
00684   std::map&lt;Bit32T, IEvent*&gt; dataExit;
00692   std::map&lt;Bit32T, AuthWaitContext*&gt; authWait;
00693   std::map&lt;Bit32T, IEvent*&gt; authExit;
00701   std::map&lt;Bit32T, UpdateWaitContext*&gt; updateWait;
00702   std::map&lt;Bit32T, IEvent*&gt; updateExit;
00706   std::vector&lt;std::pair&lt;ByteT, ByteSeq&gt; &gt; controlInfoParts;
00708   <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_terminal.html">IIPMPTerminal</a>* terminal;
00709 
00710   <a class="code" href="class_d_r_m_plugin_1_1_d_r_m_logger.html">DRMLogger</a>&amp; managerLogger;
00711 };
00712 
00713 } <span class="comment">// namespace MPEG2IPMPXDRMPlugin</span>
00714 
00715 } <span class="comment">// namespace DRMPlugin</span>
00716 
00717 <span class="preprocessor">#endif // !defined (IPMPTOOLMANAGER_H)</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jun 10 19:17:59 2006 for "DRM Plugin Architecture" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
