<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&quot;DRM Plugin Architecture&quot;: IIPMPDescriptor.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>IIPMPDescriptor.h</h1><a href="_i_i_p_m_p_descriptor_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00012 <span class="preprocessor">#if !defined (IIPMPDESCRIPTOR_H)</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define IIPMPDESCRIPTOR_H</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#include "<a class="code" href="_basic_types_8h.html">BasicTypes.h</a>"</span>
00016 <span class="preprocessor">#include "<a class="code" href="_i_sig_cert_container_8h.html">ISigCertContainer.h</a>"</span>
00017 <span class="preprocessor">#include &lt;vector&gt;</span>
00018 
00020 <span class="keyword">namespace </span>DRMPlugin {
00021 
00023 <span class="keyword">namespace </span>MPEG2IPMPXDRMPlugin {
00024 
<a name="l00029"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html">00029</a> <span class="keyword">class </span><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html">IIPMPDescriptor</a> {
00030 <span class="keyword">public</span>:
00031   <span class="keyword">virtual</span> ~<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html">IIPMPDescriptor</a>() {
00032   }
00033 
<a name="l00042"></a><a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a1">00042</a>   <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a1">MPEG2Encode</a>(<a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; encoded)<span class="keyword"> const </span>{
00043     <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a> tmp(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a2">GetIPMPDescriptorID</a>());
00044     tmp += <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a4">GetIPMPToolID</a>());
00045     tmp += <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a6">GetControlPoint</a>();
00046     tmp += <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a8">GetSequenceCode</a>();
00047     <span class="keywordflow">if</span> (<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a10">GetIPMPData</a>().GetLength() &gt;= (1 &lt;&lt; 16)) {
00048       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00049     }
00050     tmp += <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>((UInt16T)(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a10">GetIPMPData</a>().GetLength()));
00051     tmp += <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a10">GetIPMPData</a>();
00052 
00053     <span class="keywordflow">if</span> (<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a12">GetSigCertContainer</a>() != 0) {
00054       tmp += (ByteT)(0x80);
00055 <span class="comment">/*</span>
00056 <span class="comment">      ByteSeq sigEnc;</span>
00057 <span class="comment">      if (GetSigCertContainer()-&gt;MPEG2Encode(sigEnc) == false) {</span>
00058 <span class="comment">        return false;</span>
00059 <span class="comment">      }</span>
00060 <span class="comment">      tmp += sigEnc;</span>
00061 <span class="comment">*/</span>
00062     } <span class="keywordflow">else</span> {
00063       tmp += (ByteT)(0x0);
00064     }
00065     <span class="comment">//  Since rights data can easily become larger than 2^8, we have to</span>
00066     <span class="comment">//  increase allowed size of the IPMP descriptor. And this is definitely</span>
00067     <span class="comment">//  a bug in the specifications, cause the size of an IPMP descriptor</span>
00068     <span class="comment">//  is limited to 2^8, while at the same time size of contained IPMP</span>
00069     <span class="comment">//  data is limited to 2^16.</span>
00070 <span class="comment">/*</span>
00071 <span class="comment">    if (tmp.GetLength() &gt; (1 &lt;&lt; 8)) {</span>
00072 <span class="comment">      return false;</span>
00073 <span class="comment">    }</span>
00074 <span class="comment">*/</span>
00075     <span class="keywordflow">if</span> (tmp.<a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html#a21">GetLength</a>() &gt; (1 &lt;&lt; 16)) {
00076       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00077     }
00078 <span class="comment">//    encoded = ByteSeq((ByteT)41) + ByteSeq((ByteT)(tmp.GetLength())) + tmp;</span>
00079     encoded = <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>((ByteT)41) + <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>((UInt16T)(tmp.<a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html#a21">GetLength</a>())) + tmp;
00080     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00081   }
00082 
00089   <span class="keyword">virtual</span> <span class="keyword">const</span> Bit32T&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a2">GetIPMPDescriptorID</a>() <span class="keyword">const </span>= 0;
00090 
00100   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a3">SetIPMPDescriptorID</a>(<span class="keyword">const</span> Bit32T&amp; descID) = 0;
00101 
00109   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a4">GetIPMPToolID</a>() <span class="keyword">const </span>= 0;
00110 
00120   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a5">SetIPMPToolID</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_bit128_t.html">Bit128T</a>&amp; <span class="keywordtype">id</span>) = 0;
00121 
00129   <span class="keyword">virtual</span> <span class="keyword">const</span> ByteT&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a6">GetControlPoint</a>() <span class="keyword">const </span>= 0;
00130 
00139   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a7">SetControlPoint</a>(<span class="keyword">const</span> ByteT&amp; cPoint) = 0;
00140 
00150   <span class="keyword">virtual</span> <span class="keyword">const</span> ByteT&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a8">GetSequenceCode</a>() <span class="keyword">const </span>= 0;
00151 
00160   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a9">SetSequenceCode</a>(<span class="keyword">const</span> ByteT&amp; sCode) = 0;
00161 
00166   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a10">GetIPMPData</a>() <span class="keyword">const </span>= 0;
00167 
00176   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a11">SetIPMPData</a>(<span class="keyword">const</span> <a class="code" href="class_d_r_m_plugin_1_1_byte_seq.html">ByteSeq</a>&amp; ipmp) = 0;
00177 
00187   <span class="keyword">virtual</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_sig_cert_container.html">ISigCertContainer</a>* <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a12">GetSigCertContainer</a>() <span class="keyword">const </span>= 0;
00188 
00201   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_i_p_m_p_descriptor.html#a13">CreateSigCertContainer</a>(<a class="code" href="class_d_r_m_plugin_1_1_m_p_e_g2_i_p_m_p_x_d_r_m_plugin_1_1_i_sig_cert_container.html">ISigCertContainer</a>** container) = 0;
00202 };
00203 
00204 } <span class="comment">// namespace MPEG2IPMPXDRMPlugin</span>
00205 
00206 } <span class="comment">// namespace DRMPlugin</span>
00207 
00208 <span class="preprocessor">#endif // !defined(IIPMPDESCRIPTOR_H)</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jun 10 19:17:59 2006 for "DRM Plugin Architecture" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
